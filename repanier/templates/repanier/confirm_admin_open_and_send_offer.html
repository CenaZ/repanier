{% extends "admin/base_site.html" %}
{% load cms_tags menu_tags compress i18n l10n crispy_forms_tags %}
{% block content %}
{#    {% addtoblock "jshead" %}<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>{% endaddtoblock %}#}
{#    <script type="text/javascript">if (typeof CMS === 'undefined') {#}
{#        CMS.$ = $#}
{#    }</script>#}
    <link rel="stylesheet" href="{{ STATIC_URL}}bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="{{ STATIC_URL}}bootstrap/css/custom.css">
    <h4>{% if pre_open %}{% trans "Pre-opening of orders" %}{% else %}{% trans "Opening of orders" %}{% endif %} : {{ permanence }}</h4>
    <p></p>
    <form action="" method="post">{% csrf_token %}
        <h6>{{ sub_title }}</h6>
        <div class="submit-row">
{#            {% if email_will_be_sent %}<button type="submit" name="test" value="test">{% trans "Test email" %}</button>{% endif %}#}
            <button type="submit" name="cancel" value="cancel"><h6>{% trans "No, cancel the action" %}</h6></button>
            <button type="submit" name="apply" value="apply" class="default"><h6>{% trans "Yes, I'm sure" %}</h6></button>
        </div>
        <fieldset class="module aligned ">
        <div class="form-row">
            <div class="field-box">
                <h6>{{ email_will_be_sent_to }}</h6>
            </div>
        {% if email_will_be_sent %}
            <div class="field-box">
                {% with id_for_label=form.template_offer_customer_mail.id_for_label %}
                    <div id="div_{{ id_for_label }}">
                        <div class="controls col-xs-12">
                            <textarea class="CMS_CKEditor texteditorwidget form-control" id="{{ id_for_label }}"
                                      name="template_offer_customer_mail">{{ form.template_offer_customer_mail.value }}</textarea>
                            <script>window.CKEDITOR_BASEPATH = "{{ STATIC_URL}}djangocms_text_ckeditor/ckeditor/";</script>
                            <script src="{{ STATIC_URL}}djangocms_text_ckeditor/ckeditor/ckeditor.js"></script>
                            <script>
                                CKEDITOR.replace("{{ id_for_label }}", {
                                    language: 'fr',
                                    forcePasteAsPlainText: true,
                                    toolbar: [
{#                                        ['Format', 'Bold', 'Italic', 'TextColor', '-', 'NumberedList', 'BulletedList', 'RemoveFormat'],#}
                                        ['Preview', 'Source']
                                    ],
{#                                    format_tags: "p;h4;h5;blockquote;mutted;success;info;danger;pushpin",#}
{#                                    format_blockquote: {"name": "Blockquote", "element": "blockquote"},#}
{#                                    format_mutted: {#}
{#                                        "attributes": {"class": "text-muted"},#}
{#                                        "name": "Mutted",#}
{#                                        "element": "p"#}
{#                                    },#}
{#                                    format_success: {#}
{#                                        "attributes": {"class": "bg-success"},#}
{#                                        "name": "Success",#}
{#                                        "element": "p"#}
{#                                    },#}
{#                                    format_info: {"attributes": {"class": "bg-info"}, "name": "Info", "element": "p"},#}
{#                                    format_danger: {"attributes": {"class": "bg-danger"}, "name": "Danger", "element": "p"},#}
{#                                    format_pushpin: {#}
{#                                        "attributes": {"class": "glyphicon glyphicon-pushpin"},#}
{#                                        "element": "span"#}
{#                                    },#}
                                    contentsCss: "{{ STATIC_URL}}bootstrap/css/bootstrap.css",
                                    width: '100%',
                                    height: '24em',
                                    removePlugins: 'elementspath',
                                    readOnly: true
                                });
                            </script>
                        </div>
                    </div>
                {% endwith %}
            </div>
        {% endif %}
        {% if template_cancel_order_mail %}
            <div class="field-box">
                {% with id_for_label=form.template_cancel_order_customer_mail.id_for_label %}
                    <div id="div_{{ id_for_label }}">
                        <div class="controls col-xs-12">
                            <textarea class="CMS_CKEditor texteditorwidget form-control" id="{{ id_for_label }}"
                                      name="template_offer_customer_mail">{{ form.template_cancel_order_customer_mail.value }}</textarea>
                            <script>window.CKEDITOR_BASEPATH = "{{ STATIC_URL}}djangocms_text_ckeditor/ckeditor/";</script>
                            <script src="{{ STATIC_URL}}djangocms_text_ckeditor/ckeditor/ckeditor.js"></script>
                            <script>
                                CKEDITOR.replace("{{ id_for_label }}", {
                                    language: 'fr',
                                    forcePasteAsPlainText: true,
                                    toolbar: [
{#                                        ['Format', 'Bold', 'Italic', 'TextColor', '-', 'NumberedList', 'BulletedList', 'RemoveFormat'],#}
                                        ['Preview', 'Source']
                                    ],
{#                                    format_tags: "p;h4;h5;blockquote;mutted;success;info;danger;pushpin",#}
{#                                    format_blockquote: {"name": "Blockquote", "element": "blockquote"},#}
{#                                    format_mutted: {#}
{#                                        "attributes": {"class": "text-muted"},#}
{#                                        "name": "Mutted",#}
{#                                        "element": "p"#}
{#                                    },#}
{#                                    format_success: {#}
{#                                        "attributes": {"class": "bg-success"},#}
{#                                        "name": "Success",#}
{#                                        "element": "p"#}
{#                                    },#}
{#                                    format_info: {"attributes": {"class": "bg-info"}, "name": "Info", "element": "p"},#}
{#                                    format_danger: {"attributes": {"class": "bg-danger"}, "name": "Danger", "element": "p"},#}
{#                                    format_pushpin: {#}
{#                                        "attributes": {"class": "glyphicon glyphicon-pushpin"},#}
{#                                        "element": "span"#}
{#                                    },#}
                                    contentsCss: "{{ STATIC_URL}}bootstrap/css/bootstrap.css",
                                    width: '100%',
                                    height: '24em',
                                    removePlugins: 'elementspath',
                                    readOnly: true
                                });
                            </script>
                        </div>
                    </div>
                {% endwith %}
            </div>
        {% endif %}
        </div>
        </fieldset>
        <input type="hidden" name="{{ action_checkbox_name }}" value="{{ permanence.id|unlocalize }}"/>
        <input type="hidden" name="action" value="{{ action }}"/>
{#        <p></p>#}
{#        <div class="form-group">#}
{#            {{ form.example_offer_customer_mail.value }}#}
{#        </div>#}
    </form>
{% endblock %}
